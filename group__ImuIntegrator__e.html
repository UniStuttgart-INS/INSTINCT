<!-- HTML header for doxygen 1.9.2-->
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=11" />
    <meta name="generator" content="Doxygen 1.9.6" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>INSTINCT: IMU Integrator (Earth-fixed frame)</title>
    <link href="tabs.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
    <link href="doxygen.css" rel="stylesheet" type="text/css" />
    <link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="eigen_navtree_hacks.js"></script>
</head>
<body>
        <div id="top">
            <!-- do not remove this div, it is closed by doxygen! -->
            <div id="titlearea">
                <table cellspacing="0" cellpadding="0">
                    <tbody>
                        <tr style="height: 56px;">
                            <td id="projectlogo"><img alt="Logo" src="INSTINCT_Logo_Text.png" /></td>
                            <td id="projectalign" style="padding-left: 0.5em;">
                                <div id="projectname">
                                    <!-- INSTINCT -->
                                    <span id="projectnumber">&#160;1.0.2</span>
                                </div>
                            </td>
                            <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group__ImuIntegrator__e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">IMU Integrator (Earth-fixed frame)<div class="ingroups"><a class="el" href="group__DataProcessor__chapter.html">DataProcessor</a> &raquo; <a class="el" href="group__DataProcessor__Integrator__chapter.html">Integrator</a></div></div></div>
</div><!--header-->
<div class="contents">
<h1><a class="anchor" id="ImuIntegrator-Mechanization-e"></a>
Earth-fixed frame mechanization</h1>
<h2><a class="anchor" id="ImuIntegrator-Mechanization-e-Attitude"></a>
Attitude</h2>
<h3><a class="anchor" id="ImuIntegrator-Mechanization-e-Attitude-DCM"></a>
Propagation of direction cosine matrix with time</h3>
<p><a class="anchor" id="eq-ImuIntegrator-Mechanization-e-Attitude-DCM"></a> </p><p class="formulaDsp">
<picture><source srcset="form_78_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-e-Attitude-DCM}
  \mathbf{\dot{C}}_b^e = \mathbf{C}_b^e \boldsymbol{\Omega}_{eb}^b
\end{equation}" src="form_78.svg" width="1519" height="23"/></picture>
</p>
<p> where</p><ul>
<li><picture><source srcset="form_79_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \boldsymbol{\Omega}_{eb}^b $" src="form_79.svg" width="28" height="23"/></picture> is the skew symmetric form of <picture><source srcset="form_80_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \boldsymbol{\omega}_{eb}^b $" src="form_80.svg" width="26" height="21"/></picture>, the body rate with respect to the Earth-fixed frame</li>
</ul>
<p>see</p><ul>
<li><a class="el" href="citelist.html#CITEREF_Titterton2004">[32]</a> Titterton, ch. 3.5.2, eq. 3.22, p. 29</li>
<li><a class="el" href="citelist.html#CITEREF_Jekeli2001">[13]</a> Jekeli, ch. 4.3.3, eq. 4.83, p. 126</li>
<li><a class="el" href="citelist.html#CITEREF_Groves2013">[10]</a> Groves, ch. 5.3.3, eq. 5.35, p. 175</li>
</ul>
<p>The body rate with respect to the Earth-fixed frame <picture><source srcset="form_80_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \boldsymbol{\omega}_{eb}^b $" src="form_80.svg" width="26" height="21"/></picture> can be expressed as <a class="anchor" id="eq-ImuIntegrator-Mechanization-e-Attitude-omega-eb"></a> </p><p class="formulaDsp">
<picture><source srcset="form_81_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-e-Attitude-omega-eb}
  \boldsymbol{\omega}_{eb}^b = \boldsymbol{\omega}_{ib}^b - \mathbf{C}_e^b \boldsymbol{\omega}_{ie}^e
\end{equation}" src="form_81.svg" width="1545" height="21"/></picture>
</p>
<p> this together with the skew-symmetric matrix transformation (see <a class="el" href="citelist.html#CITEREF_Groves2013">[10]</a> Groves, ch. 2.3.1, eq. 2.51, p. 45) <a class="anchor" id="eq-ImuIntegrator-Mechanization-e-Attitude-skew-symmetric-matrix-transform"></a> </p><p class="formulaDsp">
<picture><source srcset="form_82_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-e-Attitude-skew-symmetric-matrix-transform}
  \mathbf{\Omega}_{\beta\alpha}^\delta = \mathbf{C}_\gamma^\delta \mathbf{\Omega}_{\beta\alpha}^\gamma \mathbf{C}_\delta^\gamma
\end{equation}" src="form_82.svg" width="1540" height="26"/></picture>
</p>
<p> leads to the skew symmetric form of <a class="el" href="group__ImuIntegrator__e.html#eq-ImuIntegrator-Mechanization-e-Attitude-DCM"><picture><source srcset="form_83_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="\eqref{eq:eq-ImuIntegrator-Mechanization-e-Attitude-DCM}" src="form_83.svg" width="33" height="19"/></picture> </a> <a class="anchor" id="eq-ImuIntegrator-Mechanization-e-Attitude-DCM-full"></a> </p><p class="formulaDsp">
<picture><source srcset="form_84_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-e-Attitude-DCM-full}
  \mathbf{\dot{C}}_b^e = \mathbf{C}_b^e \boldsymbol{\Omega}_{ib}^b - \boldsymbol{\Omega}_{ie}^e \mathbf{C}_b^e
\end{equation}" src="form_84.svg" width="1554" height="23"/></picture>
</p>
<h3><a class="anchor" id="ImuIntegrator-Mechanization-e-Attitude-Quaternion"></a>
Propagation of quaternion with time</h3>
<p>The quaternion <picture><source srcset="form_85_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \mathbf{q} = a + \mathbf{i} b + \mathbf{j} c + \mathbf{k} d $" src="form_85.svg" width="154" height="16"/></picture> propagates as (see <a class="el" href="citelist.html#CITEREF_Titterton2004">[32]</a> Titterton, ch. 3.6.4.3, eq. 3.60-3.62, p. 44) <a class="anchor" id="eq-ImuIntegrator-Mechanization-e-Attitude-Quaternion-base"></a> </p><p class="formulaDsp">
<picture><source srcset="form_86_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-e-Attitude-Quaternion-base}
  \mathbf{\dot{q}}_b^e = 0.5 \mathbf{q}_b^e \cdot \mathbf{p}_{eb}^b
\end{equation}" src="form_86.svg" width="1531" height="21"/></picture>
</p>
<p> where <picture><source srcset="form_87_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \mathbf{p}_{eb}^b = \begin{pmatrix} 0 &amp; \boldsymbol{\omega}_{eb}^b \end{pmatrix}^T = \begin{pmatrix} 0 &amp; \omega_{eb,x}^b &amp; \omega_{eb,y}^b &amp; \omega_{eb,z}^b \end{pmatrix}^T $" src="form_87.svg" width="347" height="28"/></picture></p>
<p>This can be written in matrix form as <a class="anchor" id="eq-ImuIntegrator-Mechanization-e-Attitude-Quaternion-base-matrix"></a> </p><p class="formulaDsp">
<picture><source srcset="form_88_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-e-Attitude-Quaternion-base-matrix}
  \mathbf{\dot{q}}_b^e
      = \begin{bmatrix} \dotup{a} \\ \dotup{b} \\ \dotup{c} \\ \dotup{d} \end{bmatrix}
      = 0.5 \begin{bmatrix} a &amp; -b &amp; -c &amp; -d \\
                            b &amp;  a &amp; -d &amp;  c \\
                            c &amp;  d &amp;  a &amp; -b \\
                            d &amp; -c &amp;  b &amp;  a \end{bmatrix}
            \begin{bmatrix} 0 \\ \omega_{eb,x}^b \\ \omega_{eb,y}^b \\ \omega_{eb,z}^b \end{bmatrix}
\end{equation}" src="form_88.svg" width="1640" height="86"/></picture>
</p>
<p> that is <a class="anchor" id="eq-ImuIntegrator-Mechanization-e-Attitude-Quaternion-components"></a> </p><p class="formulaDsp">
<picture><source srcset="form_89_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-e-Attitude-Quaternion-components}
\begin{aligned}
  \dotup{a} &amp;= -0.5 (b \omega_{eb,x}^b + c \omega_{eb,y}^b + d \omega_{eb,z}^b) &amp;=  0.5 ( 0 \cdot a - \omega_{eb,x}^b b - \omega_{eb,y}^b c - \omega_{eb,z}^b d) \\
  \dotup{b} &amp;=  0.5 (a \omega_{eb,x}^b - d \omega_{eb,y}^b + c \omega_{eb,z}^b) &amp;=  0.5 (\omega_{eb,x}^b a +  0 \cdot b + \omega_{eb,z}^b c - \omega_{eb,y}^b d) \\
  \dotup{c} &amp;=  0.5 (d \omega_{eb,x}^b + a \omega_{eb,y}^b - b \omega_{eb,z}^b) &amp;=  0.5 (\omega_{eb,y}^b a - \omega_{eb,z}^b b +  0 \cdot c + \omega_{eb,x}^b d) \\
  \dotup{d} &amp;= -0.5 (c \omega_{eb,x}^b - b \omega_{eb,y}^b - a \omega_{eb,z}^b) &amp;=  0.5 (\omega_{eb,z}^b a + \omega_{eb,y}^b b - \omega_{eb,x}^b c +  0 \cdot d) \\
\end{aligned}
\end{equation}" src="form_89.svg" width="1750" height="112"/></picture>
</p>
<p>and this can be written in matrix form again as <a class="anchor" id="eq-ImuIntegrator-Mechanization-e-Attitude-Quaternion-matrix"></a> </p><p class="formulaDsp">
<picture><source srcset="form_90_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-e-Attitude-Quaternion-matrix}
  \mathbf{\dot{q}}_b^e
      = \begin{bmatrix} \dotup{a} \\ \dotup{b} \\ \dotup{c} \\ \dotup{d} \end{bmatrix}
      = \frac{1}{2} \begin{bmatrix}        0        &amp; -\omega_{eb,x}^b &amp; -\omega_{eb,y}^b &amp; -\omega_{eb,z}^b \\
                                    \omega_{eb,x}^b &amp;        0         &amp;  \omega_{eb,z}^b &amp; -\omega_{eb,y}^b \\
                                    \omega_{eb,y}^b &amp; -\omega_{eb,z}^b &amp;        0         &amp;  \omega_{eb,x}^b \\
                                    \omega_{eb,z}^b &amp;  \omega_{eb,y}^b &amp; -\omega_{eb,x}^b &amp;        0         \end{bmatrix}
                    \begin{bmatrix} a \\ b \\ c \\ d \end{bmatrix}
\end{equation}" src="form_90.svg" width="1678" height="89"/></picture>
</p>
<p> see</p><ul>
<li><a class="el" href="citelist.html#CITEREF_Titterton2004">[32]</a> Titterton, ch. 11.2.5, eq. 11.33-11.35, p. 319 (e instead of n system)</li>
</ul>
<h2><a class="anchor" id="ImuIntegrator-Mechanization-e-Velocity"></a>
Velocity</h2>
<p>The derivative of the velocity in Earth frame coordinates can be expressed as</p>
<p><a class="anchor" id="eq-ImuIntegrator-Mechanization-e-Velocity"></a> </p><p class="formulaDsp">
<picture><source srcset="form_91_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-e-Velocity}
  \boldsymbol{\dot{v}}^e
      = \mathbf{C}_b^e \cdot \overbrace{\boldsymbol{f}_{ib}^b}^{\hidewidth\text{measured}\hidewidth}
        -\ \underbrace{2 \boldsymbol{\omega}_{ie}^e \times \boldsymbol{v}^e}_{\hidewidth\text{coriolis acceleration}\hidewidth}
        +\ \overbrace{\boldsymbol{\gamma}^e}^{\hidewidth\text{gravitation}\hidewidth}
        -\ \underbrace{\left(\boldsymbol{\omega}_{ie}^e \times [ \boldsymbol{\omega}_{ie}^e \times \mathbf{x}^e ] \right)}_{\hidewidth\text{centrifugal acceleration}\hidewidth}
\end{equation}" src="form_91.svg" width="1684" height="72"/></picture>
</p>
<p> where</p><ul>
<li><picture><source srcset="form_92_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \boldsymbol{v}^e $" src="form_92.svg" width="18" height="14"/></picture> is the velocity with respect to the Earth in Earth-fixed frame coordinates,</li>
<li><picture><source srcset="form_93_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \boldsymbol{f}_{ib}^b $" src="form_93.svg" width="23" height="23"/></picture> is the specific force vector as measured by a triad of accelerometers and resolved into body frame coordinates</li>
<li><picture><source srcset="form_94_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \boldsymbol{\omega}_{ie}^e = \begin{bmatrix} 0 &amp; 0 &amp; \omega_{ie} \end{bmatrix}^T $" src="form_94.svg" width="149" height="26"/></picture> is the turn rate of the Earth expressed in Earth-fixed frame coordinates</li>
<li><picture><source srcset="form_95_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \boldsymbol{\gamma}^e $" src="form_95.svg" width="18" height="18"/></picture> the local gravitation vector in Earth-fixed frame coordinates (caused by effects of mass attraction)</li>
</ul>
<p>see</p><ul>
<li><a class="el" href="citelist.html#CITEREF_Titterton2004">[32]</a> Titterton, ch. 3.5.2, eq. 3.21, p. 29</li>
<li><a class="el" href="citelist.html#CITEREF_Jekeli2001">[13]</a> Jekeli, ch. 4.3.3, eq. 4.82, p. 126</li>
<li><a class="el" href="citelist.html#CITEREF_Groves2013">[10]</a> Groves, ch. 5.3.3, eq. 5.35, p. 175</li>
</ul>
<h2><a class="anchor" id="ImuIntegrator-Mechanization-e-Position"></a>
Position</h2>
<p><a class="anchor" id="eq-ImuIntegrator-Mechanization-e-Position"></a> </p><p class="formulaDsp">
<picture><source srcset="form_96_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-Mechanization-e-Position}
  \boldsymbol{\dot{x}}^e = \boldsymbol{v}^e
\end{equation}" src="form_96.svg" width="1503" height="19"/></picture>
</p>
<p>see</p><ul>
<li><a class="el" href="citelist.html#CITEREF_Titterton2004">[32]</a> Titterton, ch. 3.5.2, p. 28ff</li>
<li><a class="el" href="citelist.html#CITEREF_Jekeli2001">[13]</a> Jekeli, ch. 4.3.3, eq. 4.82, p. 126</li>
<li><a class="el" href="citelist.html#CITEREF_Groves2013">[10]</a> Groves, ch. 5.3.4, eq. 5.37, p. 175</li>
</ul>
<h1><a class="anchor" id="ImuIntegrator-e-Numerical-Integration"></a>
Numerical Integration</h1>
<h2><a class="anchor" id="ImuIntegrator-e-Numerical-Integration-RK4"></a>
Runge Kutta 4th order</h2>
<p>The universal Runge Kutta 4th order equations are</p>
<p><a class="anchor" id="eq-ImuIntegrator-e-RK4"></a> </p><p class="formulaDsp">
<picture><source srcset="form_97_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-e-RK4}
\begin{aligned}
  y_{i} &amp;= y_{i-1} + \frac{h}{6} \left( k_1 + 2 k_2 + 2 k_3 + k_4 \right) \\
  k_1 &amp;= f(y_{i-1}, t_{i-1}) \\
  k_2 &amp;= f(y_{i-1} + \frac{h}{2} k_1, t_{i-1} + \frac{h}{2}) \\
  k_3 &amp;= f(y_{i-1} + \frac{h}{2} k_2, t_{i-1} + \frac{h}{2}) \\
  k_4 &amp;= f(y_{i-1} + h \cdot k_2, t_{i-1} + h) \\
\end{aligned}
\end{equation}" src="form_97.svg" width="1608" height="177"/></picture>
</p>
<p>As the position, velocity and attitude depend on each other, the equations have to be solved simultaneously and we should not first advance <picture><source srcset="form_98_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \boldsymbol{v} $" src="form_98.svg" width="11" height="11"/></picture> and then advance <picture><source srcset="form_99_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaInl" alt="$ \boldsymbol{x} $" src="form_99.svg" width="11" height="11"/></picture>.</p>
<p><a class="anchor" id="eq-ImuIntegrator-e-ODE"></a> </p><p class="formulaDsp">
<picture><source srcset="form_100_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-e-ODE}
  f =\\
  \begin{pmatrix} \dotup{a} \\ \dotup{b} \\ \dotup{c} \\ \dotup{d} \\ \dotup{v}_x \\ \dotup{v}_y \\ \dotup{v}_z \\ \dotup{x} \\ \dotup{y} \\ \dotup{z} \end{pmatrix}
  =
  \begin{pmatrix}
    \frac{1}{2} \begin{bmatrix}        0        &amp; -\omega_{eb,x}^b &amp; -\omega_{eb,y}^b &amp; -\omega_{eb,z}^b \\
                                \omega_{eb,x}^b &amp;        0         &amp;  \omega_{eb,z}^b &amp; -\omega_{eb,y}^b \\
                                \omega_{eb,y}^b &amp; -\omega_{eb,z}^b &amp;        0         &amp;  \omega_{eb,x}^b \\
                                \omega_{eb,z}^b &amp;  \omega_{eb,y}^b &amp; -\omega_{eb,x}^b &amp;        0         \end{bmatrix} \begin{bmatrix} a \\ b \\ c \\ d \end{bmatrix} \\
    \\
    \mathbf{C}_b^e \cdot \boldsymbol{f}_{ib}^b -\ 2 \boldsymbol{\omega}_{ie}^e \times \boldsymbol{v}^e +\ \boldsymbol{\gamma}^e -\ \left(\boldsymbol{\omega}_{ie}^e \times [ \boldsymbol{\omega}_{ie}^e \times \mathbf{x}^e ] \right) \\
    \\
    v_x \\ v_y \\ v_z
  \end{pmatrix}
\end{equation}" src="form_100.svg" width="1724" height="214"/></picture>
</p>
<p>Taking only the position and velocity terms and simplifying we get</p>
<p><a class="anchor" id="eq-ImuIntegrator-e-ODE-posvel"></a> </p><p class="formulaDsp">
<picture><source srcset="form_101_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-e-ODE-posvel}
  f = \begin{pmatrix} \boldsymbol{\dot{v}} \\ \boldsymbol{\dot{x}} \end{pmatrix} =
  \begin{pmatrix}
    \mathbf{C}_b^e \cdot \boldsymbol{f}_{ib}^b -\ 2 \boldsymbol{\omega}_{ie}^e \times \boldsymbol{v}^e +\ \boldsymbol{\gamma}^e (\mathbf{x}^e) -\ \left(\boldsymbol{\omega}_{ie}^e \times [ \boldsymbol{\omega}_{ie}^e \times \mathbf{x}^e ] \right) \\
    \boldsymbol{v}
  \end{pmatrix} =
  \begin{pmatrix}
    \boldsymbol{a} (\mathbf{C}_b^e,  \boldsymbol{v}^e, \mathbf{x}^e) \\
    \boldsymbol{v}
  \end{pmatrix} \approx
  \begin{pmatrix}
    \boldsymbol{a} (\mathbf{x}^e) \\
    \boldsymbol{v}
  \end{pmatrix}
\end{equation}" src="form_101.svg" width="1850" height="44"/></picture>
</p>
<p>Which leads to the terms</p>
<p><a class="anchor" id="eq-ImuIntegrator-e-RK4-ODE"></a> </p><p class="formulaDsp">
<picture><source srcset="form_102_dark.svg" media="(prefers-color-scheme: dark)"/><img class="formulaDsp" alt="\begin{equation} \label{eq:eq-ImuIntegrator-e-RK4-ODE}
\begin{aligned}
  k_1 &amp;= \begin{pmatrix} k_{1_{v}} \\ k_{1_{x}} \end{pmatrix} = f(y_{i-1}, t_{i-1}) =
  \begin{pmatrix}
    \boldsymbol{a} (\mathbf{x}^e_{i-1}) \\
    \boldsymbol{v}_{i-1}
  \end{pmatrix} \\
  k_2 &amp;= \begin{pmatrix} k_{2_{v}} \\ k_{2_{x}} \end{pmatrix} = f(y_{i-1} + \frac{h}{2} k_1, t_{i-1} + \frac{h}{2}) =
  \begin{pmatrix}
    \boldsymbol{a} (\mathbf{x}^e_{i-1} + \frac{h}{2} k_{1_{x}}) \\
    \boldsymbol{v}_{i-1} + \frac{h}{2} k_{1_{v}}
  \end{pmatrix} \\
  k_3 &amp;= \dots
\end{aligned}
\end{equation}" src="form_102.svg" width="1703" height="117"/></picture>
</p>
<p>These terms coincide with <a class="el" href="citelist.html#CITEREF_Voesenek2008">[34]</a> Voesenek, eq. 9,10</p>
<h1><a class="anchor" id="ImuIntegrator-e-Appendix"></a>
Appendix</h1>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.2-->
<!-- start footer part -->
<div id="nav-path" class="navpath">
    <!-- id is needed for treeview function! -->
    <ul>
        <li class="footer">Generated on Mon Jan 23 2023 09:56:09 for INSTINCT by <a href="https://www.doxygen.org/index.html"><img class="footer"
                    src="doxygen.svg" width="104" height="31" alt="doxygen" /></a> 1.9.6 </li>
    </ul>
</div>
</body>
</html>
